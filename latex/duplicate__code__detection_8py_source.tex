\doxysection{duplicate\+\_\+code\+\_\+detection.\+py}
\hypertarget{duplicate__code__detection_8py_source}{}\label{duplicate__code__detection_8py_source}\index{arkanjo/third-\/party/duplicate-\/code-\/detection-\/tool/duplicate\_code\_detection.py@{arkanjo/third-\/party/duplicate-\/code-\/detection-\/tool/duplicate\_code\_detection.py}}
\mbox{\hyperlink{duplicate__code__detection_8py}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00001}\mbox{\hyperlink{namespaceduplicate__code__detection}{00001}}\ \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00002}00002\ \textcolor{stringliteral}{A\ simple\ Python3\ tool\ to\ detect\ similarities\ between\ files\ within\ a\ repository.}}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00003}00003\ \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00004}00004\ \textcolor{stringliteral}{Document\ similarity\ code\ adapted\ from\ Jonathan\ Mugan's\ tutorial:}}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00005}00005\ \textcolor{stringliteral}{https://www.oreilly.com/learning/how-\/do-\/i-\/compare-\/document-\/similarity-\/using-\/python}}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00006}00006\ \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00007}00007\ \textcolor{keyword}{import}\ os}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00008}00008\ \textcolor{keyword}{import}\ sys}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00009}00009\ \textcolor{keyword}{import}\ argparse}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00010}00010\ \textcolor{keyword}{import}\ gensim}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00011}00011\ \textcolor{keyword}{import}\ ast}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00012}00012\ \textcolor{keyword}{import}\ csv}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00013}00013\ \textcolor{keyword}{import}\ astor}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00014}00014\ \textcolor{keyword}{import}\ re}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00015}00015\ \textcolor{keyword}{import}\ tempfile}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00016}00016\ \textcolor{keyword}{import}\ json}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00017}00017\ \textcolor{keyword}{from}\ enum\ \textcolor{keyword}{import}\ Enum}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00018}00018\ \textcolor{keyword}{from}\ nltk.tokenize\ \textcolor{keyword}{import}\ word\_tokenize}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00019}00019\ \textcolor{keyword}{from}\ collections\ \textcolor{keyword}{import}\ OrderedDict}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00020}00020\ }
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00021}\mbox{\hyperlink{namespaceduplicate__code__detection_a65d680666010fc201ddc0f9423c315c8}{00021}}\ source\_code\_file\_extensions\ =\ [\textcolor{stringliteral}{"{}h"{}},\ \textcolor{stringliteral}{"{}c"{}},\ \textcolor{stringliteral}{"{}cpp"{}},\ \textcolor{stringliteral}{"{}cc"{}},\ \textcolor{stringliteral}{"{}java"{}},\ \textcolor{stringliteral}{"{}py"{}},\ \textcolor{stringliteral}{"{}cs"{}}]}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00022}\mbox{\hyperlink{namespaceduplicate__code__detection_a4433bbd434b289e4da92454c3a2ad4fa}{00022}}\ file\_column\_label\ =\ \textcolor{stringliteral}{"{}File"{}}}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00023}\mbox{\hyperlink{namespaceduplicate__code__detection_a1d614e10a73985e62c7c30b03df4ae2f}{00023}}\ file\_loc\_label\ =\ \textcolor{stringliteral}{"{},\#LoC"{}}}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00024}\mbox{\hyperlink{namespaceduplicate__code__detection_ac6d9803b05d68b220c2ba6441521a0d2}{00024}}\ similarity\_column\_label\ =\ \textcolor{stringliteral}{"{}Similarity\ (\%)"{}}}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00025}\mbox{\hyperlink{namespaceduplicate__code__detection_aa7e4b2e25d1517a2375ae35a02513bff}{00025}}\ similarity\_label\_length\ =\ len(similarity\_column\_label)}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00026}\mbox{\hyperlink{namespaceduplicate__code__detection_a34289ca119ade2d224b831d76832612a}{00026}}\ loc\_label\ =\ \textcolor{stringliteral}{"{}\#LoC"{}}}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00027}\mbox{\hyperlink{namespaceduplicate__code__detection_a070f42a6779b0b85a9d0d6f94fa2f4d6}{00027}}\ similarity\_label\ =\ \textcolor{stringliteral}{"{}Similarity"{}}}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00028}00028\ }
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00029}00029\ }
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00030}\mbox{\hyperlink{classduplicate__code__detection_1_1ReturnCode}{00030}}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classduplicate__code__detection_1_1ReturnCode}{ReturnCode}}(Enum):}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00031}\mbox{\hyperlink{classduplicate__code__detection_1_1ReturnCode_a50658c1500f92b22a0d81efe6ae1b049}{00031}}\ \ \ \ \ SUCCESS\ =\ 0}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00032}\mbox{\hyperlink{classduplicate__code__detection_1_1ReturnCode_ac098bbeb0c3ea4a5f8ddf6f4b17f17a7}{00032}}\ \ \ \ \ BAD\_INPUT\ =\ 1}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00033}\mbox{\hyperlink{classduplicate__code__detection_1_1ReturnCode_ad0b1f23fb9d06932371d1f5eafdb4fde}{00033}}\ \ \ \ \ THRESHOLD\_EXCEEDED\ =\ 2}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00034}00034\ }
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00035}00035\ }
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00036}\mbox{\hyperlink{classduplicate__code__detection_1_1CliColors}{00036}}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classduplicate__code__detection_1_1CliColors}{CliColors}}:}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00037}\mbox{\hyperlink{classduplicate__code__detection_1_1CliColors_a3ac8b095954648007bd8c25046029dea}{00037}}\ \ \ \ \ HEADER\ =\ \textcolor{stringliteral}{"{}\(\backslash\)033[95m"{}}}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00038}\mbox{\hyperlink{classduplicate__code__detection_1_1CliColors_a6760cc1c2ea81c632039350a0e81b14f}{00038}}\ \ \ \ \ OKBLUE\ =\ \textcolor{stringliteral}{"{}\(\backslash\)033[94m"{}}}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00039}\mbox{\hyperlink{classduplicate__code__detection_1_1CliColors_ae6661c7cd1760814439e60a4f893277c}{00039}}\ \ \ \ \ OKGREEN\ =\ \textcolor{stringliteral}{"{}\(\backslash\)033[92m"{}}}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00040}\mbox{\hyperlink{classduplicate__code__detection_1_1CliColors_a1dcdb32b5978674a4e3732737172e068}{00040}}\ \ \ \ \ WARNING\ =\ \textcolor{stringliteral}{"{}\(\backslash\)033[93m"{}}}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00041}\mbox{\hyperlink{classduplicate__code__detection_1_1CliColors_a41717f251e981f27396d0924585dc135}{00041}}\ \ \ \ \ FAIL\ =\ \textcolor{stringliteral}{"{}\(\backslash\)033[91m"{}}}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00042}\mbox{\hyperlink{classduplicate__code__detection_1_1CliColors_aa803705c1a13f4466e3b3f9eda095d66}{00042}}\ \ \ \ \ ENDC\ =\ \textcolor{stringliteral}{"{}\(\backslash\)033[0m"{}}}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00043}\mbox{\hyperlink{classduplicate__code__detection_1_1CliColors_a1b8835c619937640d5afdb4057915abd}{00043}}\ \ \ \ \ BOLD\ =\ \textcolor{stringliteral}{"{}\(\backslash\)033[1m"{}}}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00044}\mbox{\hyperlink{classduplicate__code__detection_1_1CliColors_ade12dde4b4c9d19bb547ac13445925ad}{00044}}\ \ \ \ \ UNDERLINE\ =\ \textcolor{stringliteral}{"{}\(\backslash\)033[4m"{}}}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00045}00045\ }
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00046}00046\ }
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00047}\mbox{\hyperlink{namespaceduplicate__code__detection_ae010ffc70f3bd8ddea24ea426730b410}{00047}}\ \textcolor{keyword}{def\ }\mbox{\hyperlink{namespaceduplicate__code__detection_ae010ffc70f3bd8ddea24ea426730b410}{get\_all\_source\_code\_from\_directory}}(directory,\ file\_extensions):}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00048}00048\ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}Get\ a\ list\ with\ all\ the\ source\ code\ files\ within\ the\ directory"{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00049}00049\ \ \ \ \ source\_code\_files\ =\ list()}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00050}00050\ \ \ \ \ \textcolor{keywordflow}{for}\ dirpath,\ \_,\ filenames\ \textcolor{keywordflow}{in}\ os.walk(directory):}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00051}00051\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ name\ \textcolor{keywordflow}{in}\ filenames:}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00052}00052\ \ \ \ \ \ \ \ \ \ \ \ \ \_,\ file\_extension\ =\ os.path.splitext(name)}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00053}00053\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ file\_extension[1:]\ \textcolor{keywordflow}{in}\ file\_extensions:}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00054}00054\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ filename\ =\ os.path.join(dirpath,\ name)}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00055}00055\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ source\_code\_files.append(filename)}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00056}00056\ }
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00057}00057\ \ \ \ \ \textcolor{keywordflow}{return}\ source\_code\_files}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00058}00058\ }
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00059}00059\ }
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00060}\mbox{\hyperlink{namespaceduplicate__code__detection_a00a1899a4818d03117ee859ab010f58a}{00060}}\ \textcolor{keyword}{def\ }\mbox{\hyperlink{namespaceduplicate__code__detection_a00a1899a4818d03117ee859ab010f58a}{conditional\_print}}(text,\ machine\_friendly\_output):}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00061}00061\ \ \ \ \ \textcolor{keywordflow}{if}\ \textcolor{keywordflow}{not}\ machine\_friendly\_output:}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00062}00062\ \ \ \ \ \ \ \ \ print(text)}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00063}00063\ }
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00064}00064\ }
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00065}\mbox{\hyperlink{namespaceduplicate__code__detection_a72670ee80af736f522eaaf0b86883300}{00065}}\ \textcolor{keyword}{def\ }\mbox{\hyperlink{namespaceduplicate__code__detection_a72670ee80af736f522eaaf0b86883300}{remove\_comments\_and\_docstrings}}(source\_code:\ str)\ -\/>\ str:}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00066}00066\ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}Strip\ comments\ and\ docstrings\ from\ source\ code}}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00067}00067\ \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00068}00068\ \textcolor{stringliteral}{\ \ \ \ ..\ seealso::}}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00069}00069\ \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00070}00070\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ https://gist.github.com/phpdude/1ae6f19de213d66286c8183e9e3b9ec1}}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00071}00071\ \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00072}00072\ \textcolor{stringliteral}{\ \ \ \ :param\ source\_code:\ Raw\ source\ code\ as\ a\ single\ string}}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00073}00073\ \textcolor{stringliteral}{\ \ \ \ :type\ source\_code:\ str}}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00074}00074\ \textcolor{stringliteral}{\ \ \ \ :return:\ Stripped\ source\ code\ as\ a\ single\ string}}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00075}00075\ \textcolor{stringliteral}{\ \ \ \ :rtype:\ str}}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00076}00076\ \textcolor{stringliteral}{\ \ \ \ "{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00077}00077\ \ \ \ \ parsed\ =\ ast.parse(source\_code)}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00078}00078\ \ \ \ \ \textcolor{keywordflow}{for}\ node\ \textcolor{keywordflow}{in}\ ast.walk(parsed):}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00079}00079\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ \textcolor{keywordflow}{not}\ isinstance(}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00080}00080\ \ \ \ \ \ \ \ \ \ \ \ \ node,\ (ast.FunctionDef,\ ast.ClassDef,\ ast.AsyncFunctionDef,\ ast.Module)}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00081}00081\ \ \ \ \ \ \ \ \ ):}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00082}00082\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{continue}}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00083}00083\ }
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00084}00084\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ \textcolor{keywordflow}{not}\ len(node.body):}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00085}00085\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{continue}}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00086}00086\ }
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00087}00087\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ \textcolor{keywordflow}{not}\ isinstance(node.body[0],\ ast.Expr):}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00088}00088\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{continue}}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00089}00089\ }
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00090}00090\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ \textcolor{keywordflow}{not}\ hasattr(node.body[0],\ \textcolor{stringliteral}{"{}value"{}})\ \textcolor{keywordflow}{or}\ \textcolor{keywordflow}{not}\ isinstance(}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00091}00091\ \ \ \ \ \ \ \ \ \ \ \ \ node.body[0].value,\ ast.Str}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00092}00092\ \ \ \ \ \ \ \ \ ):}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00093}00093\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{continue}}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00094}00094\ }
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00095}00095\ \ \ \ \ \ \ \ \ node.body\ =\ node.body[1:]}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00096}00096\ }
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00097}00097\ \ \ \ \ source\_code\_clean\ =\ astor.to\_source(parsed)}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00098}00098\ \ \ \ \ \textcolor{keywordflow}{return}\ source\_code\_clean}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00099}00099\ }
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00100}00100\ }
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00101}\mbox{\hyperlink{namespaceduplicate__code__detection_aa319b29e5b513dc5d0fd97f18cbd36d0}{00101}}\ \textcolor{keyword}{def\ }\mbox{\hyperlink{namespaceduplicate__code__detection_aa319b29e5b513dc5d0fd97f18cbd36d0}{get\_loc\_count}}(file\_path):}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00102}00102\ \ \ \ \ lines\_count\ =\ -\/1}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00103}00103\ \ \ \ \ \textcolor{keywordflow}{try}:}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00104}00104\ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ open(os.path.normpath(file\_path),\ \textcolor{stringliteral}{'r'})\ \textcolor{keyword}{as}\ the\_file:}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00105}00105\ \ \ \ \ \ \ \ \ \ \ \ \ lines\_count\ =\ len(the\_file.readlines())}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00106}00106\ \ \ \ \ \textcolor{keywordflow}{except}\ Exception\ \textcolor{keyword}{as}\ err:}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00107}00107\ \ \ \ \ \ \ \ \ print(f\textcolor{stringliteral}{"{}WARNING:\ Failed\ to\ get\ lines\ count\ for\ file\ \{file\_path\},\ reason:\ \{str(err)\}"{}})}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00108}00108\ \ \ \ \ \textcolor{keywordflow}{return}\ lines\_count}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00109}00109\ }
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00110}00110\ }
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00111}\mbox{\hyperlink{namespaceduplicate__code__detection_a8004dc22e7af260e78190dbd3ca5da53}{00111}}\ \textcolor{keyword}{def\ }\mbox{\hyperlink{namespaceduplicate__code__detection_a8004dc22e7af260e78190dbd3ca5da53}{get\_loc\_to\_print}}(loc\_count):}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00112}00112\ \ \ \ \ loc\_to\_print\ =\ str(loc\_count)\ \textcolor{keywordflow}{if}\ loc\_count\ >=\ 0\ \textcolor{keywordflow}{else}\ \textcolor{stringliteral}{"{}"{}}}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00113}00113\ \ \ \ \ \textcolor{keywordflow}{return}\ loc\_to\_print}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00114}00114\ }
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00115}00115\ }
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00116}\mbox{\hyperlink{namespaceduplicate__code__detection_af10e203db7259a37996405ee6411868f}{00116}}\ \textcolor{keyword}{def\ }\mbox{\hyperlink{namespaceduplicate__code__detection_af10e203db7259a37996405ee6411868f}{main}}():}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00117}00117\ \ \ \ \ parser\_description\ =\ (}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00118}00118\ \ \ \ \ \ \ \ \ CliColors.HEADER}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00119}00119\ \ \ \ \ \ \ \ \ +\ CliColors.BOLD}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00120}00120\ \ \ \ \ \ \ \ \ +\ \textcolor{stringliteral}{"{}===\ Duplicate\ Code\ Detection\ Tool\ ==="{}}}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00121}00121\ \ \ \ \ \ \ \ \ +\ CliColors.ENDC}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00122}00122\ \ \ \ \ )}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00123}00123\ \ \ \ \ parser\ =\ argparse.ArgumentParser(description=parser\_description)}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00124}00124\ \ \ \ \ parser.add\_argument(}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00125}00125\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}-\/t"{}},}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00126}00126\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}-\/-\/fail-\/threshold"{}},}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00127}00127\ \ \ \ \ \ \ \ \ type=int,}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00128}00128\ \ \ \ \ \ \ \ \ default=100,}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00129}00129\ \ \ \ \ \ \ \ \ help=\textcolor{stringliteral}{"{}The\ maximum\ allowed\ similarity\ before\ the\ script\ exits\ with\ an\ error."{}},}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00130}00130\ \ \ \ \ )}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00131}00131\ \ \ \ \ group\ =\ parser.add\_mutually\_exclusive\_group(required=\textcolor{keyword}{True})}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00132}00132\ \ \ \ \ group.add\_argument(}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00133}00133\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}-\/d"{}},}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00134}00134\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}-\/-\/directories"{}},}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00135}00135\ \ \ \ \ \ \ \ \ nargs=\textcolor{stringliteral}{"{}+"{}},}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00136}00136\ \ \ \ \ \ \ \ \ help=\textcolor{stringliteral}{"{}Check\ for\ similarities\ between\ all\ files\ of\ the\ specified\ directories."{}},}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00137}00137\ \ \ \ \ )}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00138}00138\ \ \ \ \ group.add\_argument(}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00139}00139\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}-\/f"{}},}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00140}00140\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}-\/-\/files"{}},}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00141}00141\ \ \ \ \ \ \ \ \ nargs=\textcolor{stringliteral}{"{}+"{}},}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00142}00142\ \ \ \ \ \ \ \ \ help=\textcolor{stringliteral}{"{}Check\ for\ similarities\ between\ specified\ files.\ \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00143}00143\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ The\ more\ files\ are\ supplied\ the\ more\ accurate\ are\ the\ results."{}},}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00144}00144\ \ \ \ \ )}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00145}00145\ \ \ \ \ parser.add\_argument(}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00146}00146\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}-\/-\/ignore-\/directories"{}},\ nargs=\textcolor{stringliteral}{"{}+"{}},\ default=list(),\ help=\textcolor{stringliteral}{"{}Directories\ to\ ignore."{}}}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00147}00147\ \ \ \ \ )}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00148}00148\ \ \ \ \ parser.add\_argument(\textcolor{stringliteral}{"{}-\/-\/ignore-\/files"{}},\ nargs=\textcolor{stringliteral}{"{}+"{}},\ help=\textcolor{stringliteral}{"{}Files\ to\ ignore."{}})}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00149}00149\ \ \ \ \ parser.add\_argument(}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00150}00150\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}-\/j"{}},\ \textcolor{stringliteral}{"{}-\/-\/json"{}},\ type=bool,\ default=\textcolor{keyword}{False},\ help=\textcolor{stringliteral}{"{}Print\ output\ as\ JSON."{}}}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00151}00151\ \ \ \ \ )}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00152}00152\ \ \ \ \ parser.add\_argument(}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00153}00153\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}-\/-\/project-\/root-\/dir"{}},}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00154}00154\ \ \ \ \ \ \ \ \ type=str,}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00155}00155\ \ \ \ \ \ \ \ \ default=str(),}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00156}00156\ \ \ \ \ \ \ \ \ help=\textcolor{stringliteral}{"{}The\ relative\ path\ to\ the\ project\ root\ directory\ to\ be\ removed\ when\ printing\ out\ results."{}},}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00157}00157\ \ \ \ \ )}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00158}00158\ \ \ \ \ parser.add\_argument(}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00159}00159\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}-\/-\/file-\/extensions"{}},}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00160}00160\ \ \ \ \ \ \ \ \ nargs=\textcolor{stringliteral}{"{}+"{}},}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00161}00161\ \ \ \ \ \ \ \ \ default=source\_code\_file\_extensions,}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00162}00162\ \ \ \ \ \ \ \ \ help=\textcolor{stringliteral}{"{}File\ extensions\ to\ check\ for\ similarities."{}},}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00163}00163\ \ \ \ \ )}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00164}00164\ \ \ \ \ parser.add\_argument(}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00165}00165\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}-\/-\/ignore-\/threshold"{}},}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00166}00166\ \ \ \ \ \ \ \ \ type=int,}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00167}00167\ \ \ \ \ \ \ \ \ default=0,}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00168}00168\ \ \ \ \ \ \ \ \ help=\textcolor{stringliteral}{"{}Don't\ print\ out\ similarity\ below\ the\ ignore\ threshold"{}},}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00169}00169\ \ \ \ \ )}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00170}00170\ \ \ \ \ parser.add\_argument(}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00171}00171\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}-\/-\/only-\/code"{}},}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00172}00172\ \ \ \ \ \ \ \ \ action=\textcolor{stringliteral}{"{}store\_true"{}},}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00173}00173\ \ \ \ \ \ \ \ \ help=\textcolor{stringliteral}{"{}Removes\ comments\ and\ docstrings\ from\ the\ source\ code\ before\ analysis"{}},}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00174}00174\ \ \ \ \ )}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00175}00175\ \ \ \ \ parser.add\_argument(}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00176}00176\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}-\/-\/csv-\/output"{}},}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00177}00177\ \ \ \ \ \ \ \ \ type=str,}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00178}00178\ \ \ \ \ \ \ \ \ default=str(),}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00179}00179\ \ \ \ \ \ \ \ \ help=\textcolor{stringliteral}{"{}Outputs\ results\ as\ a\ CSV\ to\ the\ specified\ CSV\ path"{}},}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00180}00180\ \ \ \ \ )}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00181}00181\ \ \ \ \ parser.add\_argument(}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00182}00182\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}-\/-\/show-\/loc"{}},}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00183}00183\ \ \ \ \ \ \ \ \ action=\textcolor{stringliteral}{"{}store\_true"{}},}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00184}00184\ \ \ \ \ \ \ \ \ help=\textcolor{stringliteral}{"{}Add\ file\ line\ counts,\ including\ blank\ lines\ and\ comments,\ to\ all\ outputs."{}},}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00185}00185\ \ \ \ \ )}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00186}00186\ \ \ \ \ args\ =\ parser.parse\_args()}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00187}00187\ }
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00188}00188\ \ \ \ \ result\ =\ \mbox{\hyperlink{namespaceduplicate__code__detection_ae591f33a24d4217787d2fec3a769d8af}{run}}(}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00189}00189\ \ \ \ \ \ \ \ \ args.fail\_threshold,}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00190}00190\ \ \ \ \ \ \ \ \ args.directories,}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00191}00191\ \ \ \ \ \ \ \ \ args.files,}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00192}00192\ \ \ \ \ \ \ \ \ args.ignore\_directories,}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00193}00193\ \ \ \ \ \ \ \ \ args.ignore\_files,}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00194}00194\ \ \ \ \ \ \ \ \ args.json,}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00195}00195\ \ \ \ \ \ \ \ \ args.project\_root\_dir,}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00196}00196\ \ \ \ \ \ \ \ \ args.file\_extensions,}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00197}00197\ \ \ \ \ \ \ \ \ args.ignore\_threshold,}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00198}00198\ \ \ \ \ \ \ \ \ args.only\_code,}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00199}00199\ \ \ \ \ \ \ \ \ args.csv\_output,}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00200}00200\ \ \ \ \ \ \ \ \ args.show\_loc,}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00201}00201\ \ \ \ \ )}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00202}00202\ }
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00203}00203\ \ \ \ \ \textcolor{keywordflow}{return}\ result}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00204}00204\ }
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00205}00205\ }
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00206}\mbox{\hyperlink{namespaceduplicate__code__detection_ae591f33a24d4217787d2fec3a769d8af}{00206}}\ \textcolor{keyword}{def\ }\mbox{\hyperlink{namespaceduplicate__code__detection_ae591f33a24d4217787d2fec3a769d8af}{run}}(}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00207}00207\ \ \ \ \ fail\_threshold,}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00208}00208\ \ \ \ \ directories,}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00209}00209\ \ \ \ \ files,}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00210}00210\ \ \ \ \ ignore\_directories,}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00211}00211\ \ \ \ \ ignore\_files,}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00212}00212\ \ \ \ \ json\_output,}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00213}00213\ \ \ \ \ project\_root\_dir,}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00214}00214\ \ \ \ \ file\_extensions,}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00215}00215\ \ \ \ \ ignore\_threshold,}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00216}00216\ \ \ \ \ only\_code,}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00217}00217\ \ \ \ \ csv\_output,}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00218}00218\ \ \ \ \ show\_loc,}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00219}00219\ ):}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00220}00220\ \ \ \ \ \textcolor{comment}{\#\ Determine\ which\ files\ to\ compare\ for\ similarities}}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00221}00221\ \ \ \ \ source\_code\_files\ =\ list()}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00222}00222\ \ \ \ \ files\_to\_ignore\ =\ list()}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00223}00223\ \ \ \ \ \textcolor{keywordflow}{if}\ directories:}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00224}00224\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ directory\ \textcolor{keywordflow}{in}\ directories:}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00225}00225\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ \textcolor{keywordflow}{not}\ os.path.isdir(directory):}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00226}00226\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ print(\textcolor{stringliteral}{"{}Path\ does\ not\ exist\ or\ is\ not\ a\ directory:"{}},\ directory)}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00227}00227\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ (ReturnCode.BAD\_INPUT,\ \{\})}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00228}00228\ \ \ \ \ \ \ \ \ \ \ \ \ source\_code\_files\ +=\ \mbox{\hyperlink{namespaceduplicate__code__detection_ae010ffc70f3bd8ddea24ea426730b410}{get\_all\_source\_code\_from\_directory}}(}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00229}00229\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ directory,\ file\_extensions}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00230}00230\ \ \ \ \ \ \ \ \ \ \ \ \ )}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00231}00231\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ directory\ \textcolor{keywordflow}{in}\ ignore\_directories:}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00232}00232\ \ \ \ \ \ \ \ \ \ \ \ \ files\_to\_ignore\ +=\ \mbox{\hyperlink{namespaceduplicate__code__detection_ae010ffc70f3bd8ddea24ea426730b410}{get\_all\_source\_code\_from\_directory}}(}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00233}00233\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ directory,\ file\_extensions}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00234}00234\ \ \ \ \ \ \ \ \ \ \ \ \ )}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00235}00235\ \ \ \ \ \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00236}00236\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ len(files)\ <\ 2:}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00237}00237\ \ \ \ \ \ \ \ \ \ \ \ \ print(\textcolor{stringliteral}{"{}Too\ few\ files\ to\ compare,\ you\ need\ to\ supply\ at\ least\ 2"{}})}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00238}00238\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ (ReturnCode.BAD\_INPUT,\ \{\})}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00239}00239\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ supplied\_file\ \textcolor{keywordflow}{in}\ files:}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00240}00240\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ \textcolor{keywordflow}{not}\ os.path.isfile(supplied\_file):}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00241}00241\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ print(\textcolor{stringliteral}{"{}Supplied\ file\ does\ not\ exist:"{}},\ supplied\_file)}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00242}00242\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ (ReturnCode.BAD\_INPUT,\ \{\})}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00243}00243\ \ \ \ \ \ \ \ \ source\_code\_files\ =\ files}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00244}00244\ }
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00245}00245\ \ \ \ \ files\_to\_ignore\ +=\ ignore\_files\ \textcolor{keywordflow}{if}\ ignore\_files\ \textcolor{keywordflow}{else}\ list()}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00246}00246\ \ \ \ \ files\_to\_ignore\ =\ [os.path.normpath(f)\ \textcolor{keywordflow}{for}\ f\ \textcolor{keywordflow}{in}\ files\_to\_ignore]}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00247}00247\ \ \ \ \ source\_code\_files\ =\ [os.path.normpath(f)\ \textcolor{keywordflow}{for}\ f\ \textcolor{keywordflow}{in}\ source\_code\_files]}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00248}00248\ \ \ \ \ source\_code\_files\ =\ list(set(source\_code\_files)\ -\/\ set(files\_to\_ignore))}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00249}00249\ \ \ \ \ \textcolor{keywordflow}{if}\ len(source\_code\_files)\ <\ 2:}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00250}00250\ \ \ \ \ \ \ \ \ print(\textcolor{stringliteral}{"{}Not\ enough\ source\ code\ files\ found"{}})}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00251}00251\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ (ReturnCode.BAD\_INPUT,\ \{\})}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00252}00252\ \ \ \ \ \textcolor{comment}{\#\ Sort\ the\ sources,\ so\ the\ results\ are\ sorted\ too\ and\ are\ reproducible}}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00253}00253\ \ \ \ \ source\_code\_files.sort()}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00254}00254\ \ \ \ \ source\_code\_files\ =\ [os.path.abspath(f)\ \textcolor{keywordflow}{for}\ f\ \textcolor{keywordflow}{in}\ source\_code\_files]}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00255}00255\ }
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00256}00256\ \ \ \ \ \textcolor{comment}{\#\ Get\ the\ absolute\ project\ root\ directory\ path\ to\ remove\ when\ printing\ out\ the\ results}}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00257}00257\ \ \ \ \ \textcolor{keywordflow}{if}\ project\_root\_dir:}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00258}00258\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ \textcolor{keywordflow}{not}\ os.path.isdir(project\_root\_dir):}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00259}00259\ \ \ \ \ \ \ \ \ \ \ \ \ print(}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00260}00260\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}The\ project\ root\ directory\ does\ not\ exist\ or\ is\ not\ a\ directory:"{}},}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00261}00261\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ project\_root\_dir,}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00262}00262\ \ \ \ \ \ \ \ \ \ \ \ \ )}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00263}00263\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ (ReturnCode.BAD\_INPUT,\ \{\})}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00264}00264\ \ \ \ \ \ \ \ \ project\_root\_dir\ =\ os.path.abspath(project\_root\_dir)}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00265}00265\ \ \ \ \ \ \ \ \ project\_root\_dir\ =\ os.path.join(project\_root\_dir,\ \textcolor{stringliteral}{"{}"{}})\ \ \textcolor{comment}{\#\ Add\ the\ trailing\ slash}}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00266}00266\ }
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00267}00267\ \ \ \ \ \textcolor{comment}{\#\ Find\ the\ largest\ string\ length\ to\ format\ the\ textual\ output}}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00268}00268\ \ \ \ \ largest\_string\_length\ =\ len(}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00269}00269\ \ \ \ \ \ \ \ \ max(source\_code\_files,\ key=len).replace(project\_root\_dir,\ \textcolor{stringliteral}{"{}"{}})}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00270}00270\ \ \ \ \ )}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00271}00271\ }
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00272}00272\ \ \ \ \ \textcolor{comment}{\#\ Parse\ the\ contents\ of\ all\ the\ source\ files}}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00273}00273\ \ \ \ \ source\_code\ =\ OrderedDict()}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00274}00274\ \ \ \ \ \textcolor{keywordflow}{for}\ source\_code\_file\ \textcolor{keywordflow}{in}\ source\_code\_files:}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00275}00275\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{try}:}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00276}00276\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ read\ file\ but\ also\ recover\ from\ encoding\ errors\ in\ source\ files}}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00277}00277\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ open(source\_code\_file,\ \textcolor{stringliteral}{"{}r"{}},\ errors=\textcolor{stringliteral}{"{}surrogateescape"{}})\ \textcolor{keyword}{as}\ f:}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00278}00278\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Store\ source\ code\ with\ the\ file\ path\ as\ the\ key}}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00279}00279\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ content\ =\ f.read()}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00280}00280\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ only\_code\ \textcolor{keywordflow}{and}\ source\_code\_file.endswith(\textcolor{stringliteral}{"{}py"{}}):}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00281}00281\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ content\ =\ \mbox{\hyperlink{namespaceduplicate__code__detection_a72670ee80af736f522eaaf0b86883300}{remove\_comments\_and\_docstrings}}(content)}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00282}00282\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ source\_code[source\_code\_file]\ =\ content}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00283}00283\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{except}\ Exception\ \textcolor{keyword}{as}\ err:}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00284}00284\ \ \ \ \ \ \ \ \ \ \ \ \ print(f\textcolor{stringliteral}{"{}ERROR:\ Failed\ to\ open\ file\ \{source\_code\_file\},\ reason:\ \{str(err)\}"{}})}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00285}00285\ }
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00286}00286\ \ \ \ \ \textcolor{comment}{\#\ Create\ a\ Similarity\ object\ of\ all\ the\ source\ code}}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00287}00287\ \ \ \ \ gen\_docs\ =\ [}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00288}00288\ \ \ \ \ \ \ \ \ [word.lower()\ \textcolor{keywordflow}{for}\ word\ \textcolor{keywordflow}{in}\ word\_tokenize(source\_code[source\_file])]}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00289}00289\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ source\_file\ \textcolor{keywordflow}{in}\ source\_code}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00290}00290\ \ \ \ \ ]}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00291}00291\ \ \ \ \ dictionary\ =\ gensim.corpora.Dictionary(gen\_docs)}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00292}00292\ \ \ \ \ corpus\ =\ [dictionary.doc2bow(gen\_doc)\ \textcolor{keywordflow}{for}\ gen\_doc\ \textcolor{keywordflow}{in}\ gen\_docs]}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00293}00293\ \ \ \ \ tf\_idf\ =\ gensim.models.TfidfModel(corpus)}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00294}00294\ \ \ \ \ sims\ =\ gensim.similarities.Similarity(}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00295}00295\ \ \ \ \ \ \ \ \ tempfile.gettempdir()\ +\ os.sep,\ tf\_idf[corpus],\ num\_features=len(dictionary)}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00296}00296\ \ \ \ \ )}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00297}00297\ }
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00298}00298\ \ \ \ \ column\_label\ =\ file\_column\_label}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00299}00299\ \ \ \ \ \textcolor{keywordflow}{if}\ show\_loc:}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00300}00300\ \ \ \ \ \ \ \ \ column\_label\ +=\ file\_loc\_label}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00301}00301\ \ \ \ \ \ \ \ \ largest\_string\_length\ +=\ len(file\_loc\_label)}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00302}00302\ }
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00303}00303\ \ \ \ \ exit\_code\ =\ ReturnCode.SUCCESS}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00304}00304\ \ \ \ \ code\_similarity\ =\ dict()}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00305}00305\ \ \ \ \ \textcolor{keywordflow}{for}\ source\_file\ \textcolor{keywordflow}{in}\ source\_code:}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00306}00306\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Check\ for\ similarities}}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00307}00307\ \ \ \ \ \ \ \ \ query\_doc\ =\ [w.lower()\ \textcolor{keywordflow}{for}\ w\ \textcolor{keywordflow}{in}\ word\_tokenize(source\_code[source\_file])]}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00308}00308\ \ \ \ \ \ \ \ \ query\_doc\_bow\ =\ dictionary.doc2bow(query\_doc)}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00309}00309\ \ \ \ \ \ \ \ \ query\_doc\_tf\_idf\ =\ tf\_idf[query\_doc\_bow]}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00310}00310\ }
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00311}00311\ \ \ \ \ \ \ \ \ loc\_info\ =\ \textcolor{stringliteral}{"{}"{}}}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00312}00312\ \ \ \ \ \ \ \ \ source\_file\_loc\ =\ -\/1}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00313}00313\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ show\_loc:}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00314}00314\ \ \ \ \ \ \ \ \ \ \ \ \ source\_file\_loc\ =\ \mbox{\hyperlink{namespaceduplicate__code__detection_aa319b29e5b513dc5d0fd97f18cbd36d0}{get\_loc\_count}}(source\_file)}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00315}00315\ \ \ \ \ \ \ \ \ \ \ \ \ loc\_info\ =\ \textcolor{stringliteral}{"{},"{}}\ +\ \mbox{\hyperlink{namespaceduplicate__code__detection_a8004dc22e7af260e78190dbd3ca5da53}{get\_loc\_to\_print}}(source\_file\_loc)}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00316}00316\ }
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00317}00317\ \ \ \ \ \ \ \ \ short\_source\_file\_path\ =\ source\_file.replace(project\_root\_dir,\ \textcolor{stringliteral}{"{}"{}})}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00318}00318\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceduplicate__code__detection_a00a1899a4818d03117ee859ab010f58a}{conditional\_print}}(}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00319}00319\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n\(\backslash\)n\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00320}00320\ \ \ \ \ \ \ \ \ \ \ \ \ +\ CliColors.HEADER}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00321}00321\ \ \ \ \ \ \ \ \ \ \ \ \ +\ \textcolor{stringliteral}{"{}Code\ duplication\ probability\ for\ "{}}}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00322}00322\ \ \ \ \ \ \ \ \ \ \ \ \ +\ short\_source\_file\_path}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00323}00323\ \ \ \ \ \ \ \ \ \ \ \ \ +\ loc\_info}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00324}00324\ \ \ \ \ \ \ \ \ \ \ \ \ +\ CliColors.ENDC,}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00325}00325\ \ \ \ \ \ \ \ \ \ \ \ \ json\_output,}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00326}00326\ \ \ \ \ \ \ \ \ )}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00327}00327\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceduplicate__code__detection_a00a1899a4818d03117ee859ab010f58a}{conditional\_print}}(}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00328}00328\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}-\/"{}}\ *\ (largest\_string\_length\ +\ similarity\_label\_length),\ json\_output}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00329}00329\ \ \ \ \ \ \ \ \ )}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00330}00330\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceduplicate__code__detection_a00a1899a4818d03117ee859ab010f58a}{conditional\_print}}(}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00331}00331\ \ \ \ \ \ \ \ \ \ \ \ \ CliColors.BOLD}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00332}00332\ \ \ \ \ \ \ \ \ \ \ \ \ +\ \textcolor{stringliteral}{"{}\%s\ \%s"{}}}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00333}00333\ \ \ \ \ \ \ \ \ \ \ \ \ \%\ (column\_label.center(largest\_string\_length),\ similarity\_column\_label)}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00334}00334\ \ \ \ \ \ \ \ \ \ \ \ \ +\ CliColors.ENDC,}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00335}00335\ \ \ \ \ \ \ \ \ \ \ \ \ json\_output,}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00336}00336\ \ \ \ \ \ \ \ \ )}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00337}00337\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceduplicate__code__detection_a00a1899a4818d03117ee859ab010f58a}{conditional\_print}}(}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00338}00338\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}-\/"{}}\ *\ (largest\_string\_length\ +\ similarity\_label\_length),\ json\_output}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00339}00339\ \ \ \ \ \ \ \ \ )}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00340}00340\ }
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00341}00341\ \ \ \ \ \ \ \ \ empty\_length\ =\ 0}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00342}00342\ \ \ \ \ \ \ \ \ code\_similarity[short\_source\_file\_path]\ =\ dict()}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00343}00343\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ show\_loc:}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00344}00344\ \ \ \ \ \ \ \ \ \ \ \ \ code\_similarity[short\_source\_file\_path][loc\_label]\ =\ source\_file\_loc}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00345}00345\ \ \ \ \ \ \ \ \ \ \ \ \ empty\_length\ =\ len(code\_similarity[short\_source\_file\_path])}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00346}00346\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ similarity,\ source\ \textcolor{keywordflow}{in}\ zip(sims[query\_doc\_tf\_idf],\ source\_code):}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00347}00347\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Ignore\ similarities\ for\ the\ same\ file}}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00348}00348\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ source\ ==\ source\_file:}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00349}00349\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{continue}}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00350}00350\ \ \ \ \ \ \ \ \ \ \ \ \ similarity\_percentage\ =\ similarity\ *\ 100}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00351}00351\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Ignore\ very\ low\ similarity}}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00352}00352\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ similarity\_percentage\ <\ ignore\_threshold:}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00353}00353\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{continue}}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00354}00354\ \ \ \ \ \ \ \ \ \ \ \ \ short\_source\_path\ =\ source.replace(project\_root\_dir,\ \textcolor{stringliteral}{"{}"{}})}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00355}00355\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ show\_loc:}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00356}00356\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ code\_similarity[short\_source\_file\_path][short\_source\_path]\ =\ dict()}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00357}00357\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ code\_similarity[short\_source\_file\_path][short\_source\_path][loc\_label]\ =\ \mbox{\hyperlink{namespaceduplicate__code__detection_aa319b29e5b513dc5d0fd97f18cbd36d0}{get\_loc\_count}}(}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00358}00358\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ source}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00359}00359\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ )}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00360}00360\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ code\_similarity[short\_source\_file\_path][short\_source\_path][similarity\_label]\ \ =\ round(}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00361}00361\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ similarity\_percentage,\ 2}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00362}00362\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ )}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00363}00363\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00364}00364\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ code\_similarity[short\_source\_file\_path][short\_source\_path]\ =\ round(}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00365}00365\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ similarity\_percentage,\ 2}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00366}00366\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ )}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00367}00367\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ similarity\_percentage\ >\ fail\_threshold:}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00368}00368\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ similarity\_percentage\ =\ 100.00}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00369}00369\ \ \ \ \ \ \ \ \ \ \ \ \ color\ =\ (}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00370}00370\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ CliColors.OKGREEN}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00371}00371\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ similarity\_percentage\ <\ 10}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00372}00372\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ (}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00373}00373\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ CliColors.WARNING\ \textcolor{keywordflow}{if}\ similarity\_percentage\ <\ 20\ \textcolor{keywordflow}{else}\ CliColors.FAIL}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00374}00374\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ )}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00375}00375\ \ \ \ \ \ \ \ \ \ \ \ \ )}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00376}00376\ \ \ \ \ \ \ \ \ \ \ \ \ info\_to\_print\ =\ short\_source\_path}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00377}00377\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ show\_loc:}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00378}00378\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ info\_to\_print\ +=\ \textcolor{stringliteral}{"{},"{}}\ +\ \mbox{\hyperlink{namespaceduplicate__code__detection_a8004dc22e7af260e78190dbd3ca5da53}{get\_loc\_to\_print}}(\mbox{\hyperlink{namespaceduplicate__code__detection_aa319b29e5b513dc5d0fd97f18cbd36d0}{get\_loc\_count}}(source))}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00379}00379\ }
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00380}00380\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceduplicate__code__detection_a00a1899a4818d03117ee859ab010f58a}{conditional\_print}}(}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00381}00381\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}\%s\ \ \ \ \ "{}}\ \%\ (info\_to\_print.ljust(largest\_string\_length))}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00382}00382\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ +\ color}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00383}00383\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ +\ \textcolor{stringliteral}{"{}\%.2f"{}}\ \%\ (similarity\_percentage)}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00384}00384\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ +\ CliColors.ENDC,}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00385}00385\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ json\_output,}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00386}00386\ \ \ \ \ \ \ \ \ \ \ \ \ )}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00387}00387\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ If\ no\ similarities\ found\ for\ the\ particular\ file,\ remove\ it\ from\ the\ report}}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00388}00388\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ len(code\_similarity[short\_source\_file\_path])\ ==\ empty\_length:}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00389}00389\ \ \ \ \ \ \ \ \ \ \ \ \ del\ code\_similarity[short\_source\_file\_path]}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00390}00390\ \ \ \ \ \textcolor{keywordflow}{if}\ exit\_code\ ==\ ReturnCode.THRESHOLD\_EXCEEDED:}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00391}00391\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceduplicate__code__detection_a00a1899a4818d03117ee859ab010f58a}{conditional\_print}}(}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00392}00392\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}Code\ duplication\ threshold\ exceeded.\ Please\ consult\ logs."{}},\ json\_output}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00393}00393\ \ \ \ \ \ \ \ \ )}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00394}00394\ }
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00395}00395\ \ \ \ \ \textcolor{keywordflow}{if}\ json\_output:}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00396}00396\ \ \ \ \ \ \ \ \ similarities\_json\ =\ json.dumps(code\_similarity,\ indent=4)}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00397}00397\ \ \ \ \ \ \ \ \ print(similarities\_json)}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00398}00398\ }
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00399}00399\ \ \ \ \ \textcolor{keywordflow}{if}\ csv\_output:}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00400}00400\ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ open(csv\_output,\ \textcolor{stringliteral}{"{}w"{}})\ \textcolor{keyword}{as}\ csv\_file:}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00401}00401\ \ \ \ \ \ \ \ \ \ \ \ \ writer\ =\ csv.writer(csv\_file)}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00402}00402\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ show\_loc:}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00403}00403\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ writer.writerow([\textcolor{stringliteral}{"{}File\ A"{}},\ \textcolor{stringliteral}{"{}\#LoC\ A"{}},\ \textcolor{stringliteral}{"{}File\ B"{}},\ \textcolor{stringliteral}{"{}\#LoC\ B"{}},\ \textcolor{stringliteral}{"{}Similarity"{}}])}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00404}00404\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ first\_file\ \textcolor{keywordflow}{in}\ code\_similarity:}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00405}00405\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ second\_file\ \textcolor{keywordflow}{in}\ code\_similarity[first\_file]:}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00406}00406\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ second\_file\ !=\ loc\_label:}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00407}00407\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00408}00408\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ writer.writerow(}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00409}00409\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00410}00410\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ first\_file,}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00411}00411\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceduplicate__code__detection_a8004dc22e7af260e78190dbd3ca5da53}{get\_loc\_to\_print}}(\mbox{\hyperlink{namespaceduplicate__code__detection_aa319b29e5b513dc5d0fd97f18cbd36d0}{get\_loc\_count}}(os.path.join(project\_root\_dir,\ first\_file))),}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00412}00412\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ second\_file,}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00413}00413\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceduplicate__code__detection_a8004dc22e7af260e78190dbd3ca5da53}{get\_loc\_to\_print}}(\mbox{\hyperlink{namespaceduplicate__code__detection_aa319b29e5b513dc5d0fd97f18cbd36d0}{get\_loc\_count}}(os.path.join(project\_root\_dir,\ second\_file))),}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00414}00414\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ code\_similarity[first\_file][second\_file][similarity\_label],}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00415}00415\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ]}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00416}00416\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ )}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00417}00417\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00418}00418\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ writer.writerow([\textcolor{stringliteral}{"{}File\ A"{}},\ \textcolor{stringliteral}{"{}File\ B"{}},\ \textcolor{stringliteral}{"{}Similarity"{}}])}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00419}00419\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ first\_file\ \textcolor{keywordflow}{in}\ code\_similarity:}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00420}00420\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ second\_file\ \textcolor{keywordflow}{in}\ code\_similarity[first\_file]:}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00421}00421\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ writer.writerow(}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00422}00422\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00423}00423\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ first\_file,}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00424}00424\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ second\_file,}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00425}00425\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ code\_similarity[first\_file][second\_file],}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00426}00426\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ]}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00427}00427\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ )}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00428}00428\ }
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00429}00429\ \ \ \ \ \textcolor{keywordflow}{return}\ (exit\_code,\ code\_similarity)}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00430}00430\ }
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00431}00431\ }
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00432}00432\ \textcolor{keywordflow}{if}\ \_\_name\_\_\ ==\ \textcolor{stringliteral}{"{}\_\_main\_\_"{}}:}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00433}\mbox{\hyperlink{namespaceduplicate__code__detection_a333b51eeabf26f3de4b6c3dd9591ba2a}{00433}}\ \ \ \ \ exit\_code,\ \_\ =\ \mbox{\hyperlink{namespaceduplicate__code__detection_af10e203db7259a37996405ee6411868f}{main}}()}
\DoxyCodeLine{\Hypertarget{duplicate__code__detection_8py_source_l00434}00434\ \ \ \ \ sys.exit(exit\_code.value)}

\end{DoxyCode}
